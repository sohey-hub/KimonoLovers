<!DOCTYPE html>
<html>
  <head>
    <title>KimonoLovers</title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag 'application', media: 'all' %>
    <%= javascript_pack_tag 'application' %>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>
    </head>

  <body>
   <header class="header">
   
   <div class="bg-danger text-white">
      <nav class="navbar navbar-expand-lg navbar-light .bg-primary.bg-gradient">
        <div class="container-fluid">
          <h2><%= link_to "KimonoLovers", root_path, class:"navbar-brand" %></h2>
          
        <% if user_signed_in? %>
        <ul class="navbar-nav">
          <li class="nav-item">
            <div class="nav-link active">
            <%= "ようこそ、#{current_user.nickname}さん" %>
            </div>
          </li>
          <li>
            <%= link_to "出品する", new_item_path, class: 'nav-link' %>
          </li>
          <li class="nav-item">
            <%= link_to "ログアウト", destroy_user_session_path, method: :delete, class: "nav-link" %>
          </li>
        </ul>
    <% else %>
        <ul class="navbar-nav">
          <li class="nav-link active"><%= "新規登録orログインはこちらから→" %></li>
          <li class="nav-item">
           <%= link_to "ログイン", new_user_session_path, class: "nav-link" %>
          </li>
          <li class="nav-item">
            <%= link_to "新規登録", new_user_registration_path, class: "nav-link" %>
          </li>
        </ul>
    <% end %>
    </div>
  </div>
</header>
  
    <%= yield %>
<script>
   $(function(){

     const areaLinks = {
     1:"http://localhost:3000/hokkaidos",
     2:"http://localhost:3000/touhokus",
     3:"http://localhost:3000/kantos",
     4:"http://localhost:3000/tyubus",
     5:"http://localhost:3000/kinkis",
     6:"http://localhost:3000/tyugokus",
     7:"http://localhost:3000/sikokus",
     8:"http://localhost:3000/kyusyus",
     9:"http://localhost:3000/okinawas"
      };

      const areas = [
                {code : 1, name: "北海道", color: "#000080", hoverColor: "#aaa", prefectures: [1]},
                {code : 2, name: "東北",   color: "#0000ff", hoverColor: "#aaa", prefectures: [2,3,4,5,6,7]},
                {code : 3, name: "関東",   color: "#7ecfea", hoverColor: "#b7e5f4", prefectures: [8,9,10,11,12,13,14]},
                {code : 4, name: "中部",   color: "#7cdc92", hoverColor: "#aceebb", prefectures: [15,16,17,18,19,20,21,22,23]},
                {code : 5, name: "近畿",   color: "#ffe966", hoverColor: "#fff19c", prefectures: [24,25,26,27,28,29,30]},
                {code : 6, name: "中国",   color: "#008000", hoverColor: "#aaa", prefectures: [31,32,33,34,35]},
                {code : 7, name: "四国",   color: "#ff88ff", hoverColor: "#aaa", prefectures: [36,37,38,39]},
                {code : 8, name: "九州",   color: "#800080", hoverColor: "#aaa", prefectures: [40,41,42,43,44,45,46]},
                {code : 9, name: "沖縄",   color: "#ff0000", hoverColor: "#aaa", prefectures: [47]},
                ];
  
              $("#map-container").japanMap({
		                width:800,
                    areas  : areas,
                    selection : "area",
                    borderLineWidth: 0.25,
                    drawsBoxLine : false,
                    movesIslands : true,
                    showsAreaName : true,
                    font : "MS Mincho",
                    fontSize : 13,
		                fontColor :"#777",
                    fontShadowColor : "white",
                    onSelect : function(data){
			               location.href = areaLinks[data.area.code];
                    }
            });

        });

</script>
  </body>
</html>
